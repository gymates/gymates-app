<div class="registration-form">
  <h1 i18n="@@register.title">Create your account</h1>

  <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
    <div class="registration-field">
      <label for="email" i18n="@@register.email.label">Email</label>
      <input id="email" type="email" formControlName="email" autocomplete="email" />
      <div class="error" *ngIf="form.controls.email.touched && form.controls.email.invalid">
        <span *ngIf="form.controls.email.errors?.['required']" i18n="@@register.email.required"
          >Email is required.</span
        >
        <span *ngIf="form.controls.email.errors?.['email']" i18n="@@register.email.invalid">Enter a valid email.</span>
      </div>
    </div>

    <div class="registration-field">
      <label for="password" i18n="@@register.password.label">Password</label>
      <input id="password" type="password" formControlName="password" autocomplete="new-password" />
      <div class="error" *ngIf="form.controls.password.touched && form.controls.password.invalid">
        <span *ngIf="form.controls.password.errors?.['required']" i18n="@@register.password.required"
          >Password is required.</span
        >
        <span *ngIf="form.controls.password.errors?.['minlength']" i18n="@@register.password.minlength"
          >Password must be at least 8 characters.</span
        >
      </div>
    </div>

    <div class="registration-field">
      <label for="confirmPassword" i18n="@@register.confirmPassword.label">Confirm Password</label>
      <input id="confirmPassword" type="password" formControlName="confirmPassword" autocomplete="new-password" />
      <div class="error" *ngIf="form.controls.confirmPassword.touched && form.controls.confirmPassword.invalid">
        <span *ngIf="form.controls.confirmPassword.errors?.['required']" i18n="@@register.confirmPassword.required"
          >Confirmation is required.</span
        >
        <span *ngIf="form.controls.confirmPassword.errors?.['mismatch']" i18n="@@register.confirmPassword.mismatch"
          >Passwords do not match.</span
        >
      </div>
    </div>

    <button type="submit" [disabled]="!canSubmit()" *ngIf="!isLoading()" i18n="@@register.submit">Register</button>
    <button type="submit" [disabled]="true" *ngIf="isLoading()" i18n="@@register.submitting">Registeringâ€¦</button>
  </form>
  <p class="status success" *ngIf="isSuccess()" i18n="@@register.success">Registration successful!</p>
  <p class="status error" *ngIf="isError()" i18n="@@register.error">Registration failed. Please try again.</p>

  <p class="hint">
    <span i18n="@@register.already">Already have an account?</span>
    <a routerLink="/login" i18n="@@register.login">Log in</a>
  </p>
</div>
